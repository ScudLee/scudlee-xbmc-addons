<scraperfunctions>

	<NfoUrl dest="3">
		<RegExp input="$$1" output="&lt;url gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="3">
			<expression>aid=(\d+)</expression>
		</RegExp>
	</NfoUrl>

	<GetSearchResults clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;results&gt;\1&lt;/results&gt;" dest="4">
			<RegExp conditional="Google" input="$$4" output="\1" dest="4">
				<RegExp conditional="Google" input="$$1" output="&lt;chain function=&quot;GetGoogleResultsByID&quot;&gt;\1&lt;/chain&gt;" dest="4">
					<expression clear="yes" repeat="yes">(?i)&lt;cite&gt;anidb\.net/perl-bin/animedb\.pl\?show=anime&amp;amp;aid=(\d+)&lt;/cite&gt;</expression>
				</RegExp>
				<RegExp conditional="Google" input="$$1" output="&lt;chain function=&quot;GetGoogleResultsByID&quot;&gt;\1&lt;/chain&gt;" dest="4+">
					<expression repeat="yes">(?i)&lt;cite&gt;anidb\.net/a(\d+)&lt;/cite&gt;</expression>
				</RegExp>
				<expression noclean="1"/>
			</RegExp>
			<RegExp conditional="!Google" input="$$5" output="\1" dest="4">
				<RegExp input="$$18" output="\1[^&lt;]*" dest="6">
					<expression clear="yes" repeat="yes">(?i)([a-z0-9]+)(?:%[a-f0-9]{2}|[!.()-])*</expression>
				</RegExp>
				<RegExp input="$$1" output="&lt;entity&gt;&lt;title&gt;\2&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;&lt;id&gt;\1&lt;/id&gt;&lt;year&gt;\3&lt;/year&gt;&lt;language&gt;a\1&lt;/language&gt;&lt;/entity&gt;" dest="5">
					<expression clear="yes" repeat="yes" trim="2">&lt;anime aid=&quot;(\d+)&quot;&gt;(?:[^&lt;]*&lt;title[^&lt;]+&lt;/title&gt;)*[^&lt;]*&lt;title\s+type=&quot;main&quot;[^&gt;]*&gt;([^&lt;]*$$6?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
				</RegExp>
				<RegExp conditional="OfficialName" input="$$1" output="&lt;entity&gt;&lt;title&gt;\2&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;&lt;id&gt;\1&lt;/id&gt;&lt;year&gt;\3&lt;/year&gt;&lt;language&gt;a\1&lt;/language&gt;&lt;/entity&gt;" dest="5+">
					<expression repeat="yes" trim="2">&lt;anime aid=&quot;(\d+)&quot;&gt;(?:[^&lt;]*&lt;title[^&lt;]+&lt;/title&gt;)*[^&lt;]*&lt;title\s+type=&quot;official&quot;\s+xml:lang=&quot;$INFO[OfficialLanguage]&quot;[^&gt;]*&gt;([^&lt;]*$$6?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
				</RegExp>
				<RegExp conditional="!OfficialName" input="$$1" output="&lt;entity&gt;&lt;title&gt;\2&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;&lt;id&gt;\1&lt;/id&gt;&lt;year&gt;\3&lt;/year&gt;&lt;language&gt;a\1&lt;/language&gt;&lt;/entity&gt;" dest="5+">
					<expression repeat="yes" trim="2">&lt;anime aid=&quot;(\d+)&quot;&gt;(?:[^&lt;]*&lt;title[^&lt;]+&lt;/title&gt;)*[^&lt;]*&lt;title\s+type=&quot;official&quot;\s+xml:lang=&quot;en&quot;[^&gt;]*&gt;([^&lt;]*$$6?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
				</RegExp>
				<RegExp input="$$1" output="&lt;entity&gt;&lt;title&gt;\2&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;&lt;id&gt;\1&lt;/id&gt;&lt;year&gt;\3&lt;/year&gt;&lt;language&gt;a\1&lt;/language&gt;&lt;/entity&gt;" dest="5+">
					<expression repeat="yes" trim="2">&lt;anime aid=&quot;(\d+)&quot;&gt;(?:[^&lt;]*&lt;title[^&lt;]+&lt;/title&gt;)*[^&lt;]*&lt;title\s+type=&quot;syn&quot;\s+xml:lang=&quot;x-jat&quot;[^&gt;]*&gt;([^&lt;]*$$6?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
				</RegExp>
				<RegExp input="$$5" output="\1" dest="5">
					<RegExp input="$$5" output="'\1" dest="5">
						<expression clear="yes" repeat="yes" noclean="1">`?([^`]*)</expression>
					</RegExp>
					<expression noclean="1">'(.*)'</expression>
				</RegExp>
				<expression noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetSearchResults>

	<GetGoogleResultsByID clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;results&gt;\1&lt;/results&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="5">
				<expression/>
			</RegExp>
			<RegExp input="" output="&lt;url function=&quot;ParseGoogleResults&quot; gzip=&quot;yes&quot; cache=&quot;animetitles.xml&quot;&gt;$INFO[AnimeTitlesUrl]&lt;/url&gt;" dest="4">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetGoogleResultsByID>
	<ParseGoogleResults clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;results&gt;\1&lt;/results&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="20">
				<expression noclean="1" clear="yes">(?i)&lt;anime\s+aid=&quot;$$5&quot;&gt;(.*?)&lt;/anime&gt;</expression>
			</RegExp>
			<RegExp input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4">
				<expression clear="yes" repeat="yes" trim="1">(?i)&lt;title\s+type=&quot;main&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="OfficialName" input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4+">
				<expression repeat="yes" trim="1">(?i)&lt;title\s+type=&quot;official&quot;\s+xml:lang=&quot;$INFO[OfficialLanguage]&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="!OfficialName" input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4+">
				<expression repeat="yes" trim="1">(?i)&lt;title\s+type=&quot;official&quot;\s+xml:lang=&quot;en&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4+">
				<expression repeat="yes" trim="1">(?i)&lt;title\s+type=&quot;syn&quot;\s+xml:lang=&quot;x-jat&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$4" output="\1" dest="4">
				<RegExp input="$$4" output="'\1" dest="4">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]*)</expression>
				</RegExp>
				<expression noclean="1">'(.*)'</expression>
			</RegExp>
			<RegExp input="$$20" output="&lt;url function=&quot;ParseGoogleResultsBackup&quot; gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;" dest="4">
				<expression>^$</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseGoogleResults>
	<ParseGoogleResultsBackup clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;results&gt;\1&lt;/results&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="20">
				<expression noclean="1" clear="yes">(?i)&lt;titles&gt;(.*?)&lt;/titles&gt;</expression>
			</RegExp>
			<RegExp input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4">
				<expression clear="yes" repeat="yes" trim="1">(?i)&lt;title[^&gt;]*?type=&quot;main&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="OfficialName" input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4+">
				<expression repeat="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;$INFO[OfficialLanguage]&quot;\s+type=&quot;official&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="!OfficialName" input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4+">
				<expression repeat="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;en&quot;\s+type=&quot;official&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$20" output="&lt;entity&gt;&lt;title&gt;Google Search : A$$5 ~ \1&lt;/title&gt;&lt;url gzip=&quot;yes&quot; cache=&quot;$$5.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=$$5&lt;/url&gt;&lt;id&gt;$$5&lt;/id&gt;&lt;year&gt;\2&lt;/year&gt;&lt;/entity&gt;" dest="4+">
				<expression repeat="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;x-jat&quot;\s+type=&quot;syn&quot;[^&gt;]*&gt;([^&lt;]*?(?:\(((?:19|20)\d\d)\))?)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$4" output="\1" dest="4">
				<RegExp input="$$4" output="'\1" dest="4">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]*)</expression>
				</RegExp>
				<expression noclean="1">'(.*)'</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseGoogleResultsBackup>

	<GetPersonalAnimeMapping clearbuffers="no" dest="3">
		<RegExp input="" output="&lt;details&gt;&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="\1" dest="2">
				<expression noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetPersonalAnimeMapping>

	<LoadAnimeMapping clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;&lt;!-- $$19 --&gt;" dest="3">
			<RegExp input="$$2$$1" output="\1" dest="8">
				<expression clear="yes" noclean="1">(?i)(&lt;anime\s+anidbid=&quot;$$20&quot;.*?&lt;/anime&gt;)</expression>
			</RegExp>
			<RegExp input="$$8" output="\1" dest="19">
				<expression clear="yes">(?i)tvdbid=&quot;([^&quot;]*)&quot;</expression>
			</RegExp>
			<RegExp input="$$8" output="\1" dest="18">
				<expression clear="yes" noclean="1">(?i)(&lt;supplemental-info\s+replace=&quot;(?:true|yes)&quot;&gt;.*?&lt;/supplemental-info&gt;)</expression>
			</RegExp>
			<RegExp input="$$8" output="\1" dest="17">
				<expression clear="yes" noclean="1">(?i)(&lt;supplemental-info(?!\s+replace=&quot;(?:true|yes)&quot;)[^&gt;]*&gt;.*?&lt;/supplemental-info&gt;)</expression>
			</RegExp>
			<RegExp input="-1" output="\1" dest="11">
				<expression/>
			</RegExp>
			<RegExp input="$$8" output="\1" dest="11">
				<expression>(?i)defaulttvdbseason=&quot;([^&quot;]*)&quot;</expression>
			</RegExp>
			<RegExp input="$$8" output="\1" dest="12">
				<expression clear="yes">(?i)imdbid=&quot;([^&quot;]*)&quot;</expression>
			</RegExp>
			<RegExp input="$$8" output="\1" dest="12">
				<expression>(?i)tmdbid=&quot;([^&quot;]*)&quot;</expression>
			</RegExp>
			<RegExp input="$$12$$19" output="&lt;url function=&quot;PrepareTVDBSearch&quot; cache=&quot;$$20.xml&quot;&gt;&amp;&lt;/url&gt;" dest="8">
				<expression clear="yes">^$</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</LoadAnimeMapping>
	<PrepareTVDBSearch clearbuffers="no" dest="4">
		<RegExp input="$$9" output="&lt;details&gt;&lt;url function=&quot;CheckTVDBResults&quot; cache=&quot;tvdb-s$$20-\1.xml&quot;&gt;http://www.thetvdb.com/api/GetSeries.php?seriesname=\1&lt;/url&gt;&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="5">
				<expression clear="yes" trim="1">(?i)&lt;title.*?type=&quot;main&quot;&gt;([^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="6">
				<expression clear="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;en&quot;\s+type=&quot;official&quot;&gt;((?!$$5&lt;)[^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="7">
				<expression clear="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;x-jat&quot;\s+type=&quot;synonym&quot;&gt;((?!$$5&lt;|$$6&lt;)[^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="8">
				<expression clear="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;en&quot;\s+type=&quot;synonym&quot;&gt;((?!$$5&lt;|$$6&lt;|$$7&lt;)[^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$9" output="\1" dest="9">
				<RegExp input="$$5" output="'\1" dest="9">
					<expression clear="yes" repeat="yes">`?([^`]+)</expression>
				</RegExp>
				<expression>'(.*)</expression>
			</RegExp>
			<RegExp input="$$9" output="\1%20" dest="9">
				<expression repeat="yes">([a-zA-Z0-9'!-.]+)</expression>
			</RegExp>
			<RegExp input="$$9" output="\1" dest="9">
				<expression noclean="1">(.+)%20</expression>
			</RegExp>
			<RegExp input="$$10" output="\1" dest="10">
				<RegExp input="$$6" output="'\1" dest="10">
					<expression clear="yes" repeat="yes">`?([^`]+)</expression>
				</RegExp>
				<expression>'(.*)</expression>
			</RegExp>
			<RegExp input="$$10" output="\1%20" dest="10">
				<expression repeat="yes">([a-zA-Z0-9'!-.]+)</expression>
			</RegExp>
			<RegExp input="$$10" output="&lt;title&gt;\1&lt;/title&gt;" dest="16">
				<expression clear="yes" noclean="1">(.+)%20</expression>
			</RegExp>
			<RegExp input="$$10" output="\1" dest="10">
				<RegExp input="$$7" output="'\1" dest="10">
					<expression clear="yes" repeat="yes">`?([^`]+)</expression>
				</RegExp>
				<expression>'(.*)</expression>
			</RegExp>
			<RegExp input="$$10" output="\1%20" dest="10">
				<expression repeat="yes">([a-zA-Z0-9'!-.]+)</expression>
			</RegExp>
			<RegExp input="$$10" output="&lt;title&gt;\1&lt;/title&gt;" dest="10">
				<expression clear="yes" noclean="1">(.+)%20</expression>
			</RegExp>
			<RegExp input="$$10" output="\1" dest="16+">
				<expression noclean="1"/>
			</RegExp>
			<RegExp input="$$10" output="\1" dest="10">
				<RegExp input="$$8" output="'\1" dest="10">
					<expression clear="yes" repeat="yes">`?([^`]+)</expression>
				</RegExp>
				<expression>'(.*)</expression>
			</RegExp>
			<RegExp input="$$10" output="\1%20" dest="10">
				<expression repeat="yes">([a-zA-Z0-9'!-.]+)</expression>
			</RegExp>
			<RegExp input="$$10" output="&lt;title&gt;\1&lt;/title&gt;" dest="10">
				<expression clear="yes" noclean="1">(.+)%20</expression>
			</RegExp>
			<RegExp input="$$10" output="\1" dest="16+">
				<expression noclean="1"/>
			</RegExp>
			<RegExp conditional="Prequels" input="$$10" output="\1" dest="15">
				<RegExp input="$$1" output="\1" dest="10">
					<expression clear="yes">(?i)&lt;anime id=&quot;(\d+)&quot; type=&quot;$INFO[AlternativePrequelLinkType]&quot;&gt;</expression>
				</RegExp>
				<RegExp input="$$1" output="\1" dest="10">
					<expression>(?i)&lt;anime id=&quot;(\d+)&quot; type=&quot;Prequel&quot;&gt;</expression>
				</RegExp>
				<expression clear="yes">(\d+)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</PrepareTVDBSearch>
	<CheckTVDBResults clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$20" output="&lt;chain function=&quot;TVDBSearchLoop&quot;&gt;&amp;&lt;/chain&gt;" dest="4">
				<expression clear="yes"/>
			</RegExp>
			<RegExp input="$$1" output="" dest="4">
				<expression>(?i)&lt;seriesid&gt;(\d+)&lt;/seriesid&gt;</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="19">
				<expression>(?i)&lt;seriesid&gt;(\d+)&lt;/seriesid&gt;</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</CheckTVDBResults>
	<TVDBSearchLoop clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$8" output="&lt;url function=&quot;CheckTVDBResults&quot; cache=&quot;tvdb-s$$20-\1.xml&quot;&gt;http://www.thetvdb.com/api/GetSeries.php?seriesname=\1&lt;/url&gt;" dest="5">
				<RegExp input="$$16" output="\1" dest="8">
					<expression clear="yes" noclean="1">(?i)&lt;title&gt;([^&lt;]+)&lt;/title&gt;</expression>
				</RegExp>
				<expression clear="yes" noclean="1">(.+)</expression>
			</RegExp>
			<RegExp conditional="Prequels" input="$$15" output="&lt;url function=&quot;PrepareTVDBSearch&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="6">
				<expression clear="yes">(\d+)</expression>
			</RegExp>
			<RegExp input="$$5$$6" output="\1" dest="4">
				<expression clear="yes" noclean="1">(?i)(&lt;url.*?&lt;/url&gt;)</expression>
			</RegExp>
			<RegExp input="$$16-$$4" output="\1" dest="16">
				<expression noclean="1">(?i)&lt;title&gt;[^&lt;]+&lt;/title&gt;((?:&lt;title&gt;[^&lt;]+&lt;/title&gt;)*)-\Q$$5\E</expression>
			</RegExp>
			<RegExp input="$$15-$$4" output="\1" dest="20">
				<expression>(\d+)-\Q$$6\E</expression>
			</RegExp>
			<RegExp input="$$4" output="\1" dest="15">
				<expression>()\Q$$6\E</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</TVDBSearchLoop>

	<GetIDByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;uniqueid type=&quot;anidb&quot; default=&quot;true&quot;&gt;$$1&lt;/uniqueid&gt;" dest="8">
				<expression clear="yes"/>
			</RegExp>
			<RegExp input="$$19" output="&lt;uniqueid type=&quot;tvdb&quot;&gt;\1&lt;/uniqueid&gt;" dest="8+">
				<expression>(\d+)</expression>
			</RegExp>
			<RegExp input="$$12" output="&lt;uniqueid type=&quot;imdb&quot;&gt;\1&lt;/uniqueid&gt;" dest="8+">
				<expression>(tt\d+)</expression>
			</RegExp>
			<RegExp input="$$12" output="&lt;uniqueid type=&quot;tmdb&quot;&gt;\1&lt;/uniqueid&gt;" dest="8+">
				<expression>^(\d+)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetIDByIDChain>

	<GetTitleByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseTitle&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetTitleByIDChain>
	<ParseTitle clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="&lt;title&gt;\1&lt;/title&gt;" dest="6">
				<expression clear="yes" trim="1">(?i)&lt;title.*?type=&quot;main&quot;&gt;([^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="OfficialName" input="$$1" output="\1" dest="5">
				<expression clear="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;$INFO[OfficialLanguage]&quot;\s+type=&quot;official&quot;&gt;([^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="OfficialName" input="$$5" output="&lt;title&gt;\1&lt;/title&gt;" dest="6">
				<expression noclean="1">(.+)</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="6">
				<expression noclean="1">(?i)(&lt;title&gt;.*?&lt;/title&gt;)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="8">
				<RegExp input="$$6" output="'\1" dest="6">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
				</RegExp>
				<expression clear="yes" noclean="1">'(.*)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseTitle>

	<GetOriginalTitleByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseOriginalTitle&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetOriginalTitleByIDChain>
	<ParseOriginalTitle clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp conditional="!OfficialName" input="$$1" output="&lt;originaltitle&gt;\1&lt;/originaltitle&gt;" dest="6">
				<expression clear="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;en&quot;\s+type=&quot;official&quot;&gt;([^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp conditional="OfficialName" input="$$1" output="&lt;originaltitle&gt;\1&lt;/originaltitle&gt;" dest="6">
				<expression clear="yes" trim="1">(?i)&lt;title\s+xml:lang=&quot;$INFO[OfficialLanguage]&quot;\s+type=&quot;official&quot;&gt;([^&lt;]+)&lt;/title&gt;</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="6">
				<expression noclean="1">(?i)(&lt;originaltitle&gt;.*?&lt;/originaltitle&gt;)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="8">
				<RegExp input="$$6" output="'\1" dest="6">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
				</RegExp>
				<expression clear="yes" noclean="1">'(.*)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseOriginalTitle>

	<GetStartDateByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseStartDate&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetStartDateByIDChain>
	<ParseStartDate clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="&lt;year&gt;\1&lt;/year&gt;" dest="6">
				<expression clear="yes">(?i)&lt;startdate&gt;(\d{4})-?</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="6">
				<expression noclean="1">(?i)(&lt;year&gt;.*?&lt;/year&gt;)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="8">
				<expression clear="yes" noclean="1"/>
			</RegExp>
			<RegExp input="$$1" output="&lt;premiered&gt;\1&lt;/premiered&gt;" dest="6">
				<expression clear="yes">&lt;startdate&gt;(\d{4}-\d{2}-\d{2})&lt;/startdate&gt;</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="6">
				<expression noclean="1">(?i)(&lt;premiered&gt;.*?&lt;/premiered&gt;)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="8+">
				<expression noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseStartDate>

	<GetTagsByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="" output="" dest="8">
				<expression clear="yes"/>
			</RegExp>
			<RegExp conditional="AddTagsToAll" input="$INFO[TagList]" output="&lt;tag&gt;\1&lt;/tag&gt;" dest="8">
				<expression clear="yes" repeat="yes">([^;]+);?</expression>
			</RegExp>
			<RegExp conditional="SourceTags" input="$$5" output="\1" dest="8+">
				<RegExp input="$$1" output="&lt;chain function=&quot;GetSpecificTagsByIDChain&quot;&gt;true|2609|\1|$INFO[SourcePrefix]|&lt;/chain&gt;" dest="5">
					<expression clear="yes"/>
				</RegExp>
				<expression noclean="1"/>
			</RegExp>
			<RegExp conditional="LocationTags" input="$$5" output="\1" dest="8+">
				<RegExp input="$$1" output="&lt;chain function=&quot;GetSpecificTagsByIDChain&quot;&gt;$INFO[PreciseLocation]|2613|\1|$INFO[LocationPrefix]|&lt;/chain&gt;" dest="5">
					<expression clear="yes"/>
				</RegExp>
				<expression noclean="1"/>
			</RegExp>
			<RegExp conditional="AudienceTags" input="$$5" output="\1" dest="8+">
				<RegExp input="$$1" output="&lt;chain function=&quot;GetSpecificTagsByIDChain&quot;&gt;true|2606|\1|$INFO[AudiencePrefix]|&lt;/chain&gt;" dest="5">
					<expression clear="yes"/>
				</RegExp>
				<expression noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetTagsByIDChain>
	<GetSpecificTagsByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="\1" dest="5">
				<expression clear="yes">^(true|false)\|</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="6">
				<expression clear="yes">^(?:true|false)\|(\d+)\|</expression>
			</RegExp>
			<RegExp input="$$1" output="\1" dest="7">
				<expression clear="yes" noclean="1">^(?:true|false)\|(?:\d+)\|(?:\d+)\|(.*)\|$</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;url function=&quot;ParseSpecificTags&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression clear="yes">^(?:true|false)\|(?:\d+)\|(\d+)\|</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetSpecificTagsByIDChain>
	<ParseSpecificTags clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="" output="" dest="8">
				<expression clear="yes"/>
			</RegExp>
			<XSLT input="$$1" output="\1" dest="8">
				<xsl:stylesheet version = "1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
					<xsl:output omit-xml-declaration="yes" indent="yes"/>
					<xsl:strip-space elements="*"/>
					<xsl:key name="tagsbyparentid" match="tag" use="@parentid"/>
					<xsl:variable name="topid">$$6</xsl:variable>
					<xsl:template match="anime">
						<xsl:for-each select="tags">
							<xsl:call-template name="tagfilter">
								<xsl:with-param name="tagid" select="$topid"/>
							</xsl:call-template>
						</xsl:for-each>
					</xsl:template>
					<xsl:template name="tagfilter">
						<xsl:param name="tagid"/>
						<xsl:for-each select="key('tagsbyparentid',$tagid)">
							<xsl:if test="(not(key('tagsbyparentid',@id))) or ('$$5'='false')">
								<tag>$$7<xsl:call-template name="Capitalize"><xsl:with-param name="text" select="concat(normalize-space(name),' ')"/></xsl:call-template></tag>
							</xsl:if>
							<xsl:call-template name="tagfilter">
								<xsl:with-param name="tagid" select="@id"/>
							</xsl:call-template>
						</xsl:for-each>
					</xsl:template>
					<xsl:template name="Capitalize">
						<xsl:param name="text"/>
						<xsl:variable name="current" select="substring-before($text, ' ')"/>
						<xsl:variable name="next" select="substring-after($text, ' ')"/>
						<xsl:variable name="Capcurrent" select="concat(translate(substring($current,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),substring($current,2,string-length($current)-1))"/>
						<xsl:choose>
							<xsl:when test="$next">
								<xsl:value-of select="concat($Capcurrent,' ')"/>
								<xsl:call-template name="Capitalize">
									<xsl:with-param name="text" select="$next"/>
								</xsl:call-template>
							</xsl:when>
							<xsl:otherwise><xsl:value-of select="$Capcurrent"/></xsl:otherwise>
						</xsl:choose>
					</xsl:template>
				</xsl:stylesheet>
			</XSLT>
			<expression noclean="1"/>
		</RegExp>
	</ParseSpecificTags>

	<GetRatingByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseRating&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetRatingByIDChain>
	<ParseRating clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$INFO[RatingType]" output="$$5" dest="6">
				<RegExp input="$$1" output="\1;\2" dest="5">
					<expression clear="yes">(?i)&lt;temporary.+?count=&quot;(\d+)&quot;[^&gt;]*&gt;([^&lt;]+)&lt;/temporary&gt;</expression>
				</RegExp>
				<expression>Average</expression>
			</RegExp>
			<RegExp input="$INFO[RatingType]" output="$$5" dest="6">
				<RegExp input="$$1" output="\1;\2" dest="5">
					<expression clear="yes">(?i)&lt;permanent.+?count=&quot;(\d+)&quot;[^&gt;]*&gt;([^&lt;]+)&lt;/permanent&gt;</expression>
				</RegExp>
				<expression>Weighted</expression>
			</RegExp>
			<RegExp input="$$6" output="&lt;votes&gt;\1&lt;/votes&gt;" dest="9">
				<expression clear="yes">(\d+);.+</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="9">
				<expression noclean="1">(?i)(&lt;votes&gt;.*?&lt;/votes&gt;)</expression>
			</RegExp>
			<RegExp conditional="!OldRatings" input="$$6" output="&lt;value&gt;\1&lt;/value&gt;" dest="7">
				<expression clear="yes">\d+;(.+)</expression>
			</RegExp>
			<RegExp conditional="!OldRatings" input="$$18" output="&lt;value&gt;\1&lt;/value&gt;" dest="7">
				<expression noclean="1">(?i)&lt;rating&gt;(.*?)&lt;/rating&gt;</expression>
			</RegExp>
			<RegExp conditional="!OldRatings" input="$$9$$7" output="&lt;ratings&gt;&lt;rating name=&quot;anidb&quot; default=&quot;true&quot;&gt;\1&lt;/rating&gt;&lt;ratings&gt;" dest="8">
				<expression clear="yes" noclean="1">^(.+)$</expression>
			</RegExp>
			<RegExp conditional="OldRatings" input="$$6" output="&lt;rating&gt;\1&lt;/rating&gt;" dest="7">
				<expression clear="yes">\d+;(.+)</expression>
			</RegExp>
			<RegExp conditional="OldRatings" input="$$18" output="\1" dest="7">
				<expression noclean="1">(?i)(&lt;rating&gt;.*?&lt;/rating&gt;)</expression>
			</RegExp>
			<RegExp conditional="OldRatings" input="$$9$$7" output="\1" dest="8">
				<expression clear="yes" noclean="1">^(.+)$</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseRating>

	<GetGenresByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseGenres&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetGenresByIDChain>
	<ParseGenres clearbuffers="no" dest="4">
		<RegExp input="$$7" output="\1" dest="4">
			<RegExp input="" output="" dest="7">
				<expression clear="yes"/>
			</RegExp>
			<RegExp input="" output="" dest="8">
				<expression clear="yes"/>
			</RegExp>
			<XSLT input="$$1" output="\1" dest="7">
				<xsl:stylesheet version = "1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
					<xsl:output omit-xml-declaration="yes" indent="yes"/>
					<xsl:strip-space elements="*"/>
					<xsl:key name="tagsbyparentid" match="tag" use="@parentid"/>
					<xsl:variable name="elementsid">2611</xsl:variable>
					<xsl:variable name="themesid">2607</xsl:variable>
					<xsl:variable name="hentaiid">2615</xsl:variable>
					<xsl:variable name="pornographyid">2848</xsl:variable>
					<xsl:variable name="hentai" select="anime/tags/tag[@id=$hentaiid]"/>
					<xsl:template match="anime">
						<genres>
							<xsl:for-each select="tags">
								<xsl:call-template name="tagfilter">
									<xsl:with-param name="tagid" select="$elementsid"/>
									<xsl:with-param name="depth">1</xsl:with-param>
								</xsl:call-template>
								<xsl:call-template name="tagfilter">
									<xsl:with-param name="tagid" select="$themesid"/>
									<xsl:with-param name="depth">1</xsl:with-param>
								</xsl:call-template>
							</xsl:for-each>
						</genres>
					</xsl:template>
					<xsl:template name="tagfilter">
						<xsl:param name="tagid"/>
						<xsl:param name="depth"/>
						<xsl:for-each select="key('tagsbyparentid',$tagid)">
							<xsl:if test="(@weight&gt;=$INFO[MinGenreWeight2]) and (@localspoiler='false')">
								<genre>
									<xsl:copy-of select="@id|@parentid|@weight|@update"/>
									<xsl:attribute name="depth"><xsl:value-of select="$depth"/></xsl:attribute>
									<xsl:call-template name="Capitalize">
										<xsl:with-param name="text" select="concat(normalize-space(name),' ')"/>
									</xsl:call-template>
								</genre>
							</xsl:if>
							<xsl:if test="(@id!=$pornographyid) or ($hentai and ($INFO[AdultGenres]=1)) or ($INFO[AdultGenres]=2)">
								<xsl:call-template name="tagfilter">
									<xsl:with-param name="tagid" select="@id"/>
									<xsl:with-param name="depth" select="$depth+1"/>
								</xsl:call-template>
							</xsl:if>
						</xsl:for-each>
					</xsl:template>
					<xsl:template name="Capitalize">
						<xsl:param name="text"/>
						<xsl:variable name="current" select="substring-before($text, ' ')"/>
						<xsl:variable name="next" select="substring-after($text, ' ')"/>
						<xsl:variable name="Capcurrent" select="concat(translate(substring($current,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'),substring($current,2,string-length($current)-1))"/>
						<xsl:choose>
							<xsl:when test="$next">
								<xsl:value-of select="concat($Capcurrent,' ')"/>
								<xsl:call-template name="Capitalize">
									<xsl:with-param name="text" select="$next"/>
								</xsl:call-template>
							</xsl:when>
							<xsl:otherwise><xsl:value-of select="$Capcurrent"/></xsl:otherwise>
						</xsl:choose>
					</xsl:template>
				</xsl:stylesheet>
			</XSLT>
			<!-- Build tag filters: $$9=ids to ignore, $$10=parentids to ignore -->
			<!-- Always ignore these tag ids (General Lack Of Common Sense|Breaking The Fourth Wall|Absurdly Powerful Student Council|Parental Abandonment|Robot Helper|Alcohol) -->
			<RegExp input="" output="~|2651|2654|5850|2910|760|2879|" dest="9">
				<expression/>
			</RegExp>
			<!-- Always ignore these tag parentids (Slapstick|Magic|Alcohol) -->
			<RegExp input="" output="~|2653|2094|2879|" dest="10">
				<expression/>
			</RegExp>
			<!-- Prefer their child tags over these tags (Alien|Robot|Sports|Board Games|Card Games|The Arts|Music|School Life|Law And Order|Military) -->
			<RegExp input="$$7" output="\1|" dest="9+">
				<expression repeat="yes">(?i) parentid="(2202|2274|2881|2756|6191|2883|2794|2869|2885|36)"</expression>
			</RegExp>
			<!-- Prefer these tags over their child tags (Human Enhancement|Ecchi) -->
			<RegExp input="$$7" output="\1|" dest="10+">
				<expression repeat="yes">(?i) id="(2636|2856)"</expression>
			</RegExp>
			<!-- Ignore all child tags of Romance except Shoujo/Shounen Ai -->
			<RegExp input="$$7" output="\1|" dest="9+">
				<expression>(?i) id="(?!(?:2782"|2783"))(\d+)" parentid="2858"</expression>
			</RegExp>
			<!-- Ignore "Fantasy" if "High/Contemporary/Dark Fantasy" is present -->
			<RegExp input="$$7" output="2849|" dest="9+">
				<expression>(?i) id="(2647|2648|2649)"</expression>
			</RegExp>
			<!-- Ignore "Ninja" if "Martial Arts" is present -->
			<RegExp input="$$7" output="2572|" dest="9+">
				<expression>(?i) id="2282"</expression>
			</RegExp>
			<!-- Ignore "Magic" if "Super Power" or "Magical Girl" is present -->
			<RegExp input="$$7" output="2094|" dest="9+">
				<expression>(?i) id="(2623|2503)"</expression>
			</RegExp>
			<!-- Ignore "Super Power" if "Magical Girl" is present -->
			<RegExp input="$$7" output="2623|" dest="9+">
				<expression>(?i) id="2503"</expression>
			</RegExp>
			<!-- Ignore "Transforming Craft" if "Piloted Robot" is present -->
			<RegExp input="$$7" output="2644|" dest="9+">
				<expression>(?i) id="2645"</expression>
			</RegExp>
			<!-- Ignore "Space Travel" if "Space Opera" is present -->
			<RegExp input="$$7" output="2639|" dest="9+">
				<expression>(?i) id="5929"</expression>
			</RegExp>
			<XSLT input="$$7" output="\1" dest="8">
				<xsl:stylesheet version = "1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
					<xsl:output omit-xml-declaration="yes" indent="yes"/>
					<xsl:template match="genres">
						<genres>
							<xsl:for-each select="genre">
								<xsl:sort select="@weight" data-type="number" order="descending"/> <!-- Higher weight = More relevant -->
								<xsl:sort select="@depth" data-type="number" order="ascending"/> <!-- Lower depth = More broad/genre-like -->
								<xsl:sort select="translate(@update,'-','')" data-type="number" order="ascending"/> <!-- Older date = Less volatile -->
									<xsl:if test="(not(substring-before('$$10',concat('|',@parentid,'|')))) and
																(not(substring-before('$$9',concat('|',@id,'|'))))">
										<xsl:copy-of select="."/>
									</xsl:if>
							</xsl:for-each>
						  </genres>
					</xsl:template>
				</xsl:stylesheet>
			</XSLT>
			<RegExp input="" output="" dest="7">
				<expression clear="yes"/>
			</RegExp>
			<XSLT input="$$8" output="\1" dest="7">
				<xsl:stylesheet version = "1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
					<xsl:output omit-xml-declaration="yes" indent="yes"/>
					<xsl:template match="genres">
						<details>
							<xsl:for-each select="genre">
								<xsl:if test="position()&lt;=$INFO[GenreCount2]"><xsl:copy-of select="."/></xsl:if>
							</xsl:for-each>
						</details>
					</xsl:template>
				</xsl:stylesheet>
			</XSLT>
			<expression noclean="1"/>
		</RegExp>
	</ParseGenres>

	<GetPlotByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParsePlot&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetPlotByIDChain>
	<ParsePlot clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="" output="" dest="6">
				<expression clear="yes"/>
			</RegExp>
			<XSLT input="$$1" output="\1" dest="6">
				<xsl:stylesheet version = "1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
					<xsl:output omit-xml-declaration="yes" indent="yes"/>
					<xsl:template match="anime">
						<xsl:value-of select="description"/>
					</xsl:template>
				</xsl:stylesheet>
			</XSLT>
			<!-- Plot filtering -->
			<RegExp input="$$6" output="\1 " dest="6"><!-- Replace tabs with spaces -->
				<expression repeat="yes" noclean="1">([^\t]*)\t?</expression>
			</RegExp>
			<RegExp input="$$6" output="\1\2" dest="6"><!-- Replace multiple spaces with a single space -->
				<expression repeat="yes" noclean="1,2">([^\s]*)(?:(\s)\2*)?</expression>
			</RegExp>
			<RegExp input="$$6" output="\1\2" dest="6"><!-- Replace multiple newlines with a single newline and remove indentations/asterisks -->
				<expression repeat="yes" noclean="1,2">([^\r\n]*)(?:(\r?\n)[ \t\r\n]*)?</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="7"><!-- Capture leading "source" line -->
				<expression clear="yes" noclean="1">(?i)^\*\s*([^\r\n]*)[\r\n]+</expression>
			</RegExp>
			<RegExp input="$$6" output="\2" dest="6"><!-- Capture the rest -->
				<expression noclean="1">(?i)^\*([^\r\n]*)[\r\n]+(.*)</expression>
			</RegExp>
			<RegExp conditional="KeepSource" input="$$6" output="$$6\n\n$$7" dest="6"><!-- Move source to the end -->
				<expression noclean="1"/>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="6"><!-- Remove leading spaces/asterisks -->
				<expression noclean="1">^[\*\s]*(.*?)$</expression>
			</RegExp>
			<RegExp input="$$6 http://anidb.net/a666 []" output="\1\2" dest="6"><!-- Replace internal links with just their text -->
				<expression repeat="yes" noclean="1,2">(?i)(.*?)http://anidb.net/[^\s]+\s\[([^]]*)]</expression>
			</RegExp>
			<RegExp input="$$6 [url=][/url]" output="\1\2" dest="6"><!-- Replace external links with just their text -->
				<expression repeat="yes" noclean="1,2">(?i)(.*?)\[url=[^]]*]([^[]*)\[/url]</expression>
			</RegExp>
			<RegExp input="(?:quote from|quote|taken from|from the|from|source|by)" output="\1" dest="7">
				<expression noclean="1"/>
			</RegExp>
			<RegExp input="(?:www)?\.?(?:ann|animenewsnetwork|animenfo|animnfo|myanimelist|animeondvd|animeacademy|mangaupdates|manga-updates|wikipedia|wiki|crunchyroll)(\.:)?(?:com|net|org)?:?" output="\1" dest="9">
				<expression noclean="1"/>
			</RegExp>
			<RegExp input="$$6 [source]" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)(?:(\[)|(\()|\*)(?(2)[^]]|(?(3)[^)]|[^*]))*$$7(?(2)[^]]|(?(3)[^)]|[^*]))*(?(2)\]|(?(3)\)|\*))</expression>
			</RegExp>
			<RegExp input="$$6 [http://]" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)(?:(\[)|(\()|\*)\s*http://(?(2)[^]]|(?(3)[^)]|[^*]))*(?(2)\]|(?(3)\)|\*))</expression>
			</RegExp>
			<RegExp input="$$6 [animenewsnetwork]" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)(?:(\[)|(\()|\*)(?(2)[^]]|(?(3)[^)]|[^*]))*$$9(?(2)[^]]|(?(3)[^)]|[^*]))*(?(2)\]|(?(3)\)|\*))</expression>
			</RegExp>
			<RegExp input="$$6\nfrom animenewsnetwork\n" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)[\r\n]+$$7[: ]*[^\r\n]+</expression>
			</RegExp>
			<RegExp input="$$6\nfrom http://\n" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\r?\n[^\r\n]*$$7[: ]*http://[^\r\n]*</expression>
			</RegExp>
			<RegExp input="$$6\nann summary\n" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\r?\n[^\r\n]*$$9\s*(?:summary|description)[^\r\n]*</expression>
			</RegExp>
			<RegExp input="$$6\nhttp://\n" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\r?\n\s*http://[^\r\n\s]*</expression>
			</RegExp>
			<RegExp input="$$6\nanimenfo\n" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\r?\n\s*$$9\s*</expression>
			</RegExp>
			<RegExp input="$$6 [i][/i]" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\[i][^\[]*\[/i]</expression>
			</RegExp>
			<RegExp input="$$6\ndescription by\n" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\r?\n[\*-&#8212;]*\s*(?:(?:description|written) by)[^\r\n]*</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="6">
				<expression repeat="yes" noclean="1">(?i)(.*?)\r?\n[~-&#8212;]\s+(?:translated and adapted|adapted and translated)[^\r\n]*cranston[^\r\n]*</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="6">
				<expression noclean="1">(.*?)[\r\n]+note:.+$</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="6">
				<expression noclean="1">(?:\r?\n)*(.*)</expression>
			</RegExp>
			<RegExp input="$$6" output="'\1" dest="6">
				<expression repeat="yes" noclean="1">`?([^`]+)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="6">
				<expression noclean="1">'(.*)</expression>
			</RegExp>
			<RegExp input="$$6" output="&lt;plot&gt;\1&lt;/plot&gt;" dest="8">
				<expression clear="yes" noclean="1" trim="1"/>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="8">
				<expression noclean="1">(?i)(&lt;plot&gt;.*?&lt;/plot&gt;)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParsePlot>

	<GetCastByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseCast&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetCastByIDChain>
	<ParseCast clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="6">
				<expression clear="yes" noclean="1">(?i)&lt;characters&gt;(.*?)&lt;/characters&gt;</expression>
			</RegExp>
			<RegExp input="$$6" output="&lt;actor&gt;&lt;name&gt;\3&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;thumb&gt;http://img7.anidb.net/pics/anime/\2&lt;/thumb&gt;&lt;/actor&gt;" dest="7">
				<expression clear="yes" repeat="yes">(?i)&lt;character.*?type=&quot;main character in&quot;[^&gt;]*&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;seiyuu[^&gt;]*picture=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;([^&lt;]*)&lt;/seiyuu&gt;.*?&lt;/character&gt;</expression>
			</RegExp>
			<RegExp input="$$6" output="&lt;actor&gt;&lt;name&gt;\2&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;/actor&gt;" dest="7+">
				<expression repeat="yes">(?i)&lt;character.*?type=&quot;main character in&quot;[^&gt;]*&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;seiyuu[^&gt;]*&gt;([^&lt;]*)&lt;/seiyuu&gt;.*?&lt;/character&gt;</expression>
			</RegExp>
			<RegExp conditional="SecondAsMain" input="$$6" output="&lt;actor&gt;&lt;name&gt;\3&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;thumb&gt;http://img7.anidb.net/pics/anime/\2&lt;/thumb&gt;&lt;/actor&gt;" dest="7+">
				<expression repeat="yes">(?i)&lt;character.*?type=&quot;secondary cast in&quot;[^&gt;]*&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;seiyuu[^&gt;]*picture=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;([^&lt;]*)&lt;/seiyuu&gt;.*?&lt;/character&gt;</expression>
			</RegExp>
			<RegExp conditional="SecondAsMain" input="$$6" output="&lt;actor&gt;&lt;name&gt;\2&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;/actor&gt;" dest="7+">
				<expression repeat="yes">(?i)&lt;character.*?type=&quot;secondary cast in&quot;[^&gt;]*&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;seiyuu[^&gt;]*&gt;([^&lt;]*)&lt;/seiyuu&gt;.*?&lt;/character&gt;</expression>
			</RegExp>
			<RegExp conditional="AppearsInAsMain" input="$$6" output="&lt;actor&gt;&lt;name&gt;\3&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;thumb&gt;http://img7.anidb.net/pics/anime/\2&lt;/thumb&gt;&lt;/actor&gt;" dest="7+">
				<expression repeat="yes">(?i)&lt;character.*?type=&quot;appears in&quot;[^&gt;]*&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;seiyuu[^&gt;]*picture=&quot;([^&quot;]*)&quot;[^&gt;]*&gt;([^&lt;]*)&lt;/seiyuu&gt;.*?&lt;/character&gt;</expression>
			</RegExp>
			<RegExp conditional="AppearsInAsMain" input="$$6" output="&lt;actor&gt;&lt;name&gt;\2&lt;/name&gt;&lt;role&gt;\1&lt;/role&gt;&lt;/actor&gt;" dest="7+">
				<expression repeat="yes">(?i)&lt;character.*?type=&quot;appears in&quot;[^&gt;]*&gt;.*?&lt;name&gt;([^&lt;]*)&lt;/name&gt;.*?&lt;seiyuu[^&gt;]*&gt;([^&lt;]*)&lt;/seiyuu&gt;.*?&lt;/character&gt;</expression>
			</RegExp>
			<RegExp input="$$17" output="\1" dest="7+">
				<expression noclean="1" repeat="yes">(?i)(&lt;actor&gt;.*?&lt;/actor&gt;)</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="7">
				<expression noclean="1" repeat="yes">(?i)(&lt;actor&gt;.*?&lt;/actor&gt;)</expression>
			</RegExp>
			<RegExp input="$$7" output="\1" dest="8">
				<RegExp input="$$7" output="'\1" dest="7">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
				</RegExp>
				<expression clear="yes" noclean="1">'(.*)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseCast>

	<GetWritersByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseWriters&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetWritersByIDChain>
	<ParseWriters clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="5">
				<expression clear="yes" noclean="1">(?i)&lt;creators&gt;(.*?)&lt;/creators&gt;</expression>
			</RegExp>
			<RegExp input="$$5" output="&lt;credits&gt;\1&lt;/credits&gt;" dest="6">
				<expression clear="yes" repeat="yes">(?i)&lt;name.*?type=&quot;(?:Original|Character)[^&gt;]*?&gt;(.*?)&lt;/name&gt;</expression>
			</RegExp>
			<RegExp input="$$17" output="\1" dest="6+">
				<expression noclean="1" repeat="yes">(?i)(&lt;credits&gt;.*?&lt;/credits&gt;)</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="6">
				<expression noclean="1" repeat="yes">(?i)(&lt;credits&gt;.*?&lt;/credits&gt;)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="8">
				<RegExp input="$$6" output="'\1" dest="6">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
				</RegExp>
				<expression clear="yes" noclean="1">'(.*)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseWriters>

	<GetDirectorsByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseDirectors&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetDirectorsByIDChain>
	<ParseDirectors clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="5">
				<expression clear="yes" noclean="1">(?i)&lt;creators&gt;(.*?)&lt;/creators&gt;</expression>
			</RegExp>
			<RegExp input="$$5" output="&lt;director&gt;\1&lt;/director&gt;" dest="6">
				<expression clear="yes" repeat="yes">(?i)&lt;name.*?type=&quot;Direction&quot;&gt;(.*?)&lt;/name&gt;</expression>
			</RegExp>
			<RegExp input="$$17" output="\1" dest="6+">
				<expression noclean="1" repeat="yes">(?i)(&lt;director&gt;.*?&lt;/director&gt;)</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="6">
				<expression noclean="1" repeat="yes">(?i)(&lt;director&gt;.*?&lt;/director&gt;)</expression>
			</RegExp>
			<RegExp input="$$6" output="\1" dest="8">
				<RegExp input="$$6" output="'\1" dest="6">
					<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
				</RegExp>
				<expression clear="yes" noclean="1">'(.*)</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseDirectors>

	<GetStudiosByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseStudios&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetStudiosByIDChain>
	<ParseStudios clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="5">
				<expression clear="yes" noclean="1">(?i)&lt;creators&gt;(.*?)&lt;/creators&gt;</expression>
			</RegExp>
			<RegExp conditional="SingleStudio" input="$$7$$6$$10$$9" output="\1" dest="8">
				<!-- "Animation work" studios has priority over "Work" studios below ($$10,$$9) -->
				<RegExp input="$$5" output="&lt;studio&gt;\1&lt;/studio&gt;" dest="6">
					<expression clear="yes" repeat="yes">(?i)&lt;name.*?type=&quot;Animation Work&quot;&gt;([^&lt;]+)&lt;/name&gt;</expression>
				</RegExp>
				<RegExp input="$$17" output="\1" dest="6+">
					<expression noclean="1" repeat="yes">(?i)(&lt;studio&gt;.*?&lt;/studio&gt;)</expression>
				</RegExp>
				<RegExp input="$$18" output="\1" dest="6">
					<expression noclean="1" repeat="yes">(?i)(&lt;studio&gt;.*?&lt;/studio&gt;)</expression>
				</RegExp>
				<RegExp input="$$6" output="\1" dest="6">
					<RegExp input="$$6" output="'\1" dest="6">
						<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
					</RegExp>
					<expression clear="yes" noclean="1">'(.*)</expression>
				</RegExp>
				<!-- These studios have priority before rest below or non-enumerated ones ($$6) -->
				<RegExp input="$$6" output="\1" dest="7">
					<expression clear="yes" noclean="1">(?i)(&lt;studio&gt;(?=A-1 Pictures&lt;|AIC&lt;|Bee Train&lt;|Bones&lt;|Brain's Base&lt;|Gainax&lt;|Gonzo&lt;|J\.C\.Staff&lt;|Kyoto Animation&lt;|Madhouse&lt;|Manglobe&lt;|Nomad&lt;|Production I\.G&lt;|Shaft&lt;|Studio Deen&lt;|Studio Pierrot&lt;|Sunrise&lt;|Xebec&lt;|ZEXCS&lt;)[^&lt;]+&lt;/studio&gt;)</expression>
				</RegExp>
				<RegExp input="$$6" output="\1" dest="7+">
					<expression noclean="1">(?i)(&lt;studio&gt;(?=A-1 Pictures&lt;|ACGT&lt;|Actas&lt;|AIC A\.S\.T\.A&lt;|AIC Digital&lt;|AIC Plus\+&lt;|AIC Spirits&lt;|AIC&lt;|Ajia-dou&lt;|Animate Film&lt;|Anime Friend&lt;|Aquaplus&lt;|Arcturus&lt;|Arms&lt;|Artland&lt;|Artmic&lt;|Ashi Productions&lt;|Bee Train&lt;|Bones&lt;|Brain's Base&lt;|CoMix Wave Films&lt;|Daume&lt;|David Production&lt;|Diomedea&lt;|Doga Kobo&lt;|E&amp;G Films&lt;|G&amp;G Entertainment&lt;|G&amp;G Entertainmnt&lt;|Gainax&lt;|GK Entertainment&lt;|Gonzo&lt;|Group Tac&lt;|Hal Film Maker&lt;|Imagin&lt;|J\.C\.Staff&lt;|Karaku&lt;|Keyeast&lt;|Kyoto Animation&lt;|Madhouse&lt;|Manglobe&lt;|Nippon Animation&lt;|Nomad&lt;|OB Planning&lt;|OLM&lt;|Ordet&lt;|P\.A\. Works&lt;|Production I\.G&lt;|Radix Ace Entertainment&lt;|Radix&lt;|Satelight&lt;|Seven Arcs&lt;|Shaft&lt;|Studio 4C&lt;|Studio Barcelona&lt;|Studio Comet&lt;|Studio Deen&lt;|Studio Fantasia&lt;|Studio Ghibli&lt;|Studio Guts&lt;|Studio Hibari&lt;|Studio Izena&lt;|Studio Pierrot&lt;|Studio Rikka&lt;|Sunrise&lt;|Synergy Japan&lt;|SynergySP&lt;|Tatsunoko Production&lt;|Tezuka Productions&lt;|TMS Entertainment&lt;|Toei Animation&lt;|Toei Douga&lt;|Tokyo Movie&lt;|Trans Arts&lt;|Triangle Staff&lt;|Ufotable&lt;|White Fox&lt;|Xebec M2&lt;|Xebec&lt;|Yumeta Company&lt;|Zero G Room&lt;|ZEXCS&lt;)[^&lt;]+&lt;/studio&gt;)</expression>
				</RegExp>
				<!-- Same as above only for "Work" studios -->
				<RegExp input="$$5" output="&lt;studio&gt;\1&lt;/studio&gt;" dest="9">
					<expression clear="yes" repeat="yes">(?i)&lt;name.*?type=&quot;Work&quot;&gt;([^&lt;]+)&lt;/name&gt;</expression>
				</RegExp>
				<RegExp input="$$9" output="\1" dest="9">
					<RegExp input="$$9" output="'\1" dest="9">
						<expression clear="yes" repeat="yes" noclean="1">`?([^`]+)</expression>
					</RegExp>
					<expression clear="yes" noclean="1">'(.*)</expression>
				</RegExp>
				<RegExp input="$$9" output="\1" dest="10">
					<expression clear="yes" noclean="1">(?i)(&lt;studio&gt;(?=A-1 Pictures&lt;|AIC&lt;|Bee Train&lt;|Bones&lt;|Brain's Base&lt;|Gainax&lt;|Gonzo&lt;|J\.C\.Staff&lt;|Kyoto Animation&lt;|Madhouse&lt;|Manglobe&lt;|Nomad&lt;|Production I\.G&lt;|Shaft&lt;|Studio Deen&lt;|Studio Pierrot&lt;|Sunrise&lt;|Xebec&lt;|ZEXCS&lt;)[^&lt;]+&lt;/studio&gt;)</expression>
				</RegExp>
				<RegExp input="$$9" output="\1" dest="10+">
					<expression noclean="1">(?i)(&lt;studio&gt;(?=A-1 Pictures&lt;|ACGT&lt;|Actas&lt;|AIC A\.S\.T\.A&lt;|AIC Digital&lt;|AIC Plus\+&lt;|AIC Spirits&lt;|AIC&lt;|Ajia-dou&lt;|Animate Film&lt;|Anime Friend&lt;|Aquaplus&lt;|Arcturus&lt;|Arms&lt;|Artland&lt;|Artmic&lt;|Ashi Productions&lt;|Bee Train&lt;|Bones&lt;|Brain's Base&lt;|CoMix Wave Films&lt;|Daume&lt;|David Production&lt;|Diomedea&lt;|Doga Kobo&lt;|E&amp;G Films&lt;|G&amp;G Entertainment&lt;|G&amp;G Entertainmnt&lt;|Gainax&lt;|GK Entertainment&lt;|Gonzo&lt;|Group Tac&lt;|Hal Film Maker&lt;|Imagin&lt;|J\.C\.Staff&lt;|Karaku&lt;|Keyeast&lt;|Kyoto Animation&lt;|Madhouse&lt;|Manglobe&lt;|Nippon Animation&lt;|Nomad&lt;|OB Planning&lt;|OLM&lt;|Ordet&lt;|P\.A\. Works&lt;|Production I\.G&lt;|Radix Ace Entertainment&lt;|Radix&lt;|Satelight&lt;|Seven Arcs&lt;|Shaft&lt;|Studio 4C&lt;|Studio Barcelona&lt;|Studio Comet&lt;|Studio Deen&lt;|Studio Fantasia&lt;|Studio Ghibli&lt;|Studio Guts&lt;|Studio Hibari&lt;|Studio Izena&lt;|Studio Pierrot&lt;|Studio Rikka&lt;|Sunrise&lt;|Synergy Japan&lt;|SynergySP&lt;|Tatsunoko Production&lt;|Tezuka Productions&lt;|TMS Entertainment&lt;|Toei Animation&lt;|Toei Douga&lt;|Tokyo Movie&lt;|Trans Arts&lt;|Triangle Staff&lt;|Ufotable&lt;|White Fox&lt;|Xebec M2&lt;|Xebec&lt;|Yumeta Company&lt;|Zero G Room&lt;|ZEXCS&lt;)[^&lt;]+&lt;/studio&gt;)</expression>
				</RegExp>
				<!-- Only first studio is overtaken, order is result of joint $$7$$6$$10$$9 -->
				<expression clear="yes" noclean="1">(&lt;studio&gt;.+?&lt;/studio&gt;)</expression>
			</RegExp>
			<RegExp conditional="!SingleStudio" input="$$7" output="\1" dest="8">
				<!-- All studios found are overtaken -->
				<RegExp input="$$5" output="&lt;studio&gt;\1&lt;/studio&gt;" dest="7">
					<expression clear="yes" repeat="yes">(?i)&lt;name.*?type=&quot;Work&quot;&gt;([^&lt;]+)&lt;/name&gt;</expression>
				</RegExp>
				<!-- But "Animation Work" has priority and if there is any then "Work" studios are overwritten -->
				<RegExp input="$$5" output="&lt;studio&gt;\1&lt;/studio&gt;" dest="7">
					<expression repeat="yes">(?i)&lt;name.*?type=&quot;Animation Work&quot;&gt;([^&lt;]+)&lt;/name&gt;</expression>
				</RegExp>
				<RegExp input="$$17" output="\1" dest="7+">
					<expression noclean="1" repeat="yes">(?i)(&lt;studio&gt;.*?&lt;/studio&gt;)</expression>
				</RegExp>
				<RegExp input="$$18" output="\1" dest="7">
					<expression noclean="1" repeat="yes">(?i)(&lt;studio&gt;.*?&lt;/studio&gt;)</expression>
				</RegExp>
				<expression clear="yes" noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseStudios>

	<GetArtworkByIDChain clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseAniDBArtwork&quot; gzip=&quot;yes&quot; cache=&quot;\1.xml&quot;&gt;http://api.anidb.net:9001/httpapi?request=anime&amp;client=xbmcscrap&amp;clientver=1&amp;protover=1&amp;aid=\1&lt;/url&gt;" dest="8">
				<expression/>
			</RegExp>
			<RegExp input="$$12" output="&lt;url function=&quot;ParseTMDBBaseImageURL&quot; cache=&quot;tmdb-config.json&quot;&gt;http://api.tmdb.org/3/configuration?api_key=f090bb54758cabf231fb605d3e3e0468&lt;/url&gt;&lt;url function=&quot;ParseTMDBArtwork&quot; cache=&quot;tmdb-images-$$1-\1.json&quot;&gt;http://api.tmdb.org/3/movie/\1/images?api_key=f090bb54758cabf231fb605d3e3e0468&lt;/url&gt;" dest="8+">
				<expression repeat="yes">((?:tt)?\d+),?</expression>
			</RegExp>
			<RegExp input="$INFO[OfficialLanguage]" output="\1$$6" dest="5">
				<RegExp input="en" output="|\1" dest="6">
					<expression clear="yes">^(?!\Q$INFO[OfficialLanguage]\E$)(.*)$</expression>
				</RegExp>
				<expression clear="yes"/>
			</RegExp>
			<RegExp input="$$19" output="&lt;chain function=&quot;GetTVDBArtById&quot;&gt;\1,poster,$$5&lt;/chain&gt;" dest="8+">
				<expression>(\d+)</expression>
			</RegExp>
			<RegExp input="$$19" output="&lt;chain function=&quot;GetTVDBArtById&quot;&gt;\1,fanart,$$5&lt;/chain&gt;" dest="8+">
				<expression>(\d+)</expression>
			</RegExp>
			<RegExp input="" output="&lt;chain function=&quot;ReturnFanart&quot;&gt;&amp;&lt;/url&gt;" dest="8+">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetArtworkByIDChain>
	<ParseAniDBArtwork clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="&lt;thumb aspect=&quot;poster&quot;&gt;http://img7.anidb.net/pics/anime/\1&lt;/thumb&gt;" dest="8">
				<expression clear="yes">(?i)&lt;picture&gt;([^&lt;]+)&lt;/picture&gt;</expression>
			</RegExp>
			<RegExp input="$$17" output="\1" dest="8+">
				<expression noclean="1" repeat="yes">(?i)(&lt;thumb aspect=&quot;poster&quot;&gt;.*?&lt;/thumb&gt;)</expression>
			</RegExp>
			<RegExp input="$$18" output="\1" dest="8">
				<expression noclean="1" repeat="yes">(?i)(&lt;thumb aspect=&quot;poster&quot;&gt;.*?&lt;/thumb&gt;)</expression>
			</RegExp>
			<RegExp conditional="Fanarts" input="$$18" output="\1" dest="16">
				<expression noclean="1">(?i)&lt;fanart&gt;(.*)&lt;/fanart&gt;</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseAniDBArtwork>
	<ParseTMDBBaseImageURL clearbuffers="no" dest="4">
		<RegExp input="$$5" output="&lt;details&gt;$$10&lt;/details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="10">
				<expression>"images":\{"base_url":"([^"]*)"</expression>
			</RegExp>
			<expression noclean="1" />
		</RegExp>
	</ParseTMDBBaseImageURL>
	<ParseTMDBArtwork clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;details&gt;" dest="4">
			<RegExp input="$$1" output="\1" dest="7">
				<expression clear="yes" noclean="1">&quot;posters&quot;:\[{([^\]]*)</expression>
			</RegExp>
			<RegExp input="$$7" output="&lt;thumb aspect=&quot;poster&quot; preview=&quot;$$10w500\1&quot;&gt;$$10original\1&lt;/thumb&gt;" dest="8">
				<expression clear="yes" repeat="yes" noclean="1">&quot;file_path&quot;:&quot;([^&quot;]*)</expression>
			</RegExp>
			<RegExp conditional="Fanarts" input="$$9" output="\1" dest="16+">
				<RegExp input="$$1" output="\1" dest="7">
					<expression clear="yes" noclean="1">&quot;backdrops&quot;:\[{([^\]]*)</expression>
				</RegExp>
				<RegExp input="$$7" output="&lt;thumb preview=&quot;$$10w780\1&quot;&gt;$$10original\1&lt;/thumb&gt;" dest="9">
					<expression clear="yes" repeat="yes" noclean="1">&quot;file_path&quot;:&quot;([^&quot;]*)</expression>
				</RegExp>
				<expression noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseTMDBArtwork>
	<ReturnFanart clearbuffers="no" dest="4">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$16" output="&lt;fanart&gt;\1&lt;fanart&gt;" dest="8">
				<expression clear="yes" noclean="1"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ReturnFanart>

	<LoadTVDBAPIKey dest="3" clearbuffers="no">
		<RegExp input="" output="&lt;details&gt;&lt;/details&gt;" dest="3">
			<RegExp input="439DFEBA9D3059C6" output="\1" dest="20">
				<expression/>
			</RegExp>
		<expression noclean="1"/>
		</RegExp>
	</LoadTVDBAPIKey>

	<GetTVDBToken dest="3" clearbuffers="no">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="" output="&lt;url function=&quot;LoadTVDBToken&quot; post=&quot;yes&quot; cache=&quot;auth.json&quot;&gt;https://api.thetvdb.com/login?{&quot;apikey&quot;:&quot;$$20&quot;}|Content-Type=application/json&lt;/url&gt;" dest="4">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetTVDBToken>
	<LoadTVDBToken dest="3" clearbuffers="no">
		<RegExp input="" output="&lt;details&gt;&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="\1" dest="19">
				<expression>"token":\s*?"(.*)"</expression>
			</RegExp>
		<expression noclean="1"/>
		</RegExp>
	</LoadTVDBToken>

	<!-- input : $$1=[function name],[cache name],[URL] -->
	<!-- output: <details><url function="[...]" cache="[...]">[...]Authorization=Bearer%20[...]</url></details> -->
	<GetTVDBLogin dest="3" clearbuffers="no">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;ParseTVDBLogin&quot; post=&quot;yes&quot; cache=&quot;auth.json&quot;&gt;https://api.thetvdb.com/login?{&quot;apikey&quot;:&quot;$$20&quot;}|Content-Type=application/json&lt;/url&gt;" dest="4">
				<RegExp input="$$1" output="\1" dest="5">
					<expression clear="yes">^(.*?),</expression>
				</RegExp>
				<RegExp input="$$1" output="\1" dest="6">
					<expression clear="yes">^.*?,(.*?),</expression>
				</RegExp>
				<RegExp input="$$1" output="\1" dest="7">
					<expression clear="yes">^.*?,.*?,(.*?)$</expression>
				</RegExp>
				<expression clear="yes"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetTVDBLogin>
	<ParseTVDBLogin dest="3" clearbuffers="no">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="&lt;url function=&quot;$$5&quot; cache=&quot;$$6&quot;&gt;$$7Authorization=Bearer%20\1&lt;/url&gt;" dest="4">
				<expression clear="yes">"token":\s*?"(.*)"</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</ParseTVDBLogin>

	<LoadBuffer dest="3" clearbuffers="no">
		<RegExp input="$$1" output="&lt;details&gt;&lt;!-- \1 loaded --&gt;&lt;/details&gt;" dest="3">
			<RegExp input="$$1" output="\1" dest="10">
				<expression clear="yes"/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</LoadBuffer>

	<!-- input : $$1=[tvdb id],[artwork type(=poster|series:[]|season|seasonwide:[]|fanart)],[language](|[fallback language 1]|[fallback language 2]|...) -->
	<!-- output: <details><thumb aspect="[...]" (type="season" season="[...]")>[...]</thumb></details> -->
	<GetTVDBArtById dest="3" clearbuffers="no">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="$$11" output="&lt;chain function=&quot;LoadBuffer&quot;&gt;\1$$7&lt;/chain&gt;&lt;chain function=&quot;LoadTVDBAPIKey&quot;&gt;&lt;/chain&gt;&lt;chain function=&quot;GetTVDBLogin&quot;&gt;LoadTVDBArt,$$5-art-$$6-\1.json,https://api.thetvdb.com/series/$$5/images/query?keyType=$$6|accept-language=\1&amp;amp;&lt;/chain&gt;" dest="4">
				<RegExp input="$$1" output="\1" dest="5">
					<expression clear="yes">^(\d+)</expression>
				</RegExp>
				<RegExp input="$$1" output="\1" dest="6">
					<expression>^\d+,([^\:,]+)</expression>
				</RegExp>
				<RegExp input="$$1" output="\1" dest="7">
					<expression clear="yes">^\d+,[^\:,]+\:(\d+),</expression>
				</RegExp>
				<RegExp input="$$1" output="\1" dest="11">
					<expression>^\d+,[^,]+,(.*)$</expression>
				</RegExp>
				<expression repeat="yes" clear="yes">([^|]+)</expression>
			</RegExp>
			<RegExp input="" output="&lt;chain function=&quot;OutputTVDBArt&quot;&gt;&lt;/chain&gt;" dest="4+">
				<expression/>
			</RegExp>
			<RegExp input="" output="" dest="12">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</GetTVDBArtById>
	<LoadTVDBArt dest="3" clearbuffers="no">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
				<RegExp input="$$10" output="\1" dest="5">
					<expression clear="yes">(\d+)$</expression>
				</RegExp>
				<RegExp input="$$10" output="\1" dest="6">
					<expression>^([^\d]+)</expression>
				</RegExp>
			<RegExp input="$$1" output="&lt;Banner&gt;&lt;id&gt;\1&lt;/id&gt;&lt;keyType&gt;\2&lt;/keyType&gt;&lt;subKey&gt;\3&lt;/subKey&gt;&lt;fileName&gt;\4&lt;/fileName&gt;&lt;resolution&gt;\5&lt;/resolution&gt;&lt;average&gt;\6&lt;/average&gt;&lt;thumbnail&gt;\7&lt;/thumbnail&gt;&lt;language&gt;$$6&lt;/language&gt;&lt;SeasonBias&gt;$$5&lt;/SeasonBias&gt;&lt;/Banner&gt;" dest="12+">
				<expression repeat="yes">"id":\s*?(\d+),\s*?"keyType":\s*?"([^"]+)",\s*?"subKey":\s*?"([^"]*)",\s*?"fileName":\s*?"([^"]+)",\s*?"languageId":\s*?\d+,\s*?"language":\s*?"[^"]+",\s*?"resolution":\s*?"([^"]*)",\s*?"ratingsInfo":\s*?{\s*?"average":\s*?(?:([\d\.]+)|null),\s*?"count":\s*?\d+\s*?},\s*?"thumbnail":\s*?"([^"]*?)"</expression>
			</RegExp>
			<RegExp input="$$1" output="&lt;!-- $$6 \1 loaded --&gt;" dest="4">
				<expression clear="yes">"keyType":\s*?"([^"]+)",</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</LoadTVDBArt>
	<OutputTVDBArt dest="3" clearbuffers="no">
		<RegExp input="$$3" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="" output="" dest="3">
				<expression/>
			</RegExp>
			<XSLT input="&lt;Banners&gt;$$12&lt;/Banners&gt;" output="\1" dest="3">
				<xsl:stylesheet version = "1.0"
						xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
					<xsl:output omit-xml-declaration="yes" indent="yes"/>
					<xsl:strip-space elements="*"/>
					<xsl:key name="BannersById" match="Banner" use="id"/>
					<xsl:variable name="LanguageList" select="concat('|','$$11','|')"/>

					<xsl:template match="Banners">
							<xsl:if test="Banner[keyType='fanart']">
								<xsl:apply-templates select="Banner[(keyType='fanart') and (generate-id()=generate-id(key('BannersById', id)[1]))]">
									<xsl:sort data-type="number" order="ascending" select="string-length(substring-before($LanguageList,concat(language,'|')))"/>
									<xsl:sort data-type="number" order="descending" select="average"/>
								</xsl:apply-templates>
							</xsl:if>
							<xsl:apply-templates select="Banner[(keyType!='fanart') and (generate-id()=generate-id(key('BannersById', id)[1]))]">
								<xsl:sort data-type="number" order="ascending" select="(1 * number(subKey='graphical'))
																					+  (2 * number(subKey='text'))
																					+  (3 * number(subKey='blank'))
																					+  (4 * number(subKey=SeasonBias))
																					+  (5 * number(subKey!=SeasonBias))"/>
								<xsl:sort data-type="number" order="ascending" select="string-length(substring-before($LanguageList,concat(language,'|')))"/>
								<xsl:sort data-type="number" order="descending" select="average"/>
							</xsl:apply-templates>
							<xsl:apply-templates select="Banner[((keyType='poster') or (keyType='series')) and (generate-id()=generate-id(key('BannersById', id)[1]))]" mode="allseasons"/>
					</xsl:template>

					<xsl:template match="Banner[keyType='fanart']">
						<thumb>
							<xsl:attribute name="dim"><xsl:value-of select="resolution"/></xsl:attribute>
							<xsl:attribute name="preview">https://artworks.thetvdb.com/banners/<xsl:value-of select="concat(substring-before(fileName,'.'),'_t.',substring-after(fileName,'.'))"/></xsl:attribute>
							<xsl:text>https://artworks.thetvdb.com/banners/</xsl:text><xsl:value-of select="fileName"/>
						</thumb>
					</xsl:template>

					<xsl:template match="Banner">
						<thumb>
							<xsl:attribute name="aspect">
								<xsl:choose>
									<xsl:when test="(keyType='poster') or (keyType='season')">poster</xsl:when>
									<xsl:otherwise>banner</xsl:otherwise>
								</xsl:choose>
							</xsl:attribute>
							<xsl:if test="(keyType='season') or (keyType='seasonwide')">
								<xsl:attribute name="type">season</xsl:attribute>
								<xsl:attribute name="originalseason"><xsl:value-of select="subKey"/></xsl:attribute>
								<xsl:attribute name="season">
									<xsl:choose>
										<xsl:when test="(subKey=0)">0</xsl:when>
										<xsl:otherwise>1</xsl:otherwise>
									</xsl:choose>
								</xsl:attribute>
							</xsl:if>
							<xsl:attribute name="language"><xsl:value-of select="language"/></xsl:attribute>
							<xsl:text>http://artworks.thetvdb.com/banners/</xsl:text><xsl:value-of select="fileName"/>
						</thumb>
						<xsl:if test="keyType='seasonwide'">
							<thumb>
								<xsl:attribute name="aspect">banner</xsl:attribute>
								<xsl:attribute name="language"><xsl:value-of select="language"/></xsl:attribute>
								<xsl:text>http://artworks.thetvdb.com/banners/</xsl:text><xsl:value-of select="fileName"/>
							</thumb>
						</xsl:if>
					</xsl:template>

					<xsl:template match="Banner" mode="allseasons">
						<thumb>
							<xsl:attribute name="aspect">
								<xsl:choose>
									<xsl:when test="(keyType='poster')">poster</xsl:when>
									<xsl:otherwise>banner</xsl:otherwise>
								</xsl:choose>
							</xsl:attribute>
							<xsl:attribute name="type">season</xsl:attribute>
							<xsl:attribute name="season">-1</xsl:attribute>
							<xsl:attribute name="language"><xsl:value-of select="language"/></xsl:attribute>
							<xsl:text>https://artworks.thetvdb.com/banners/</xsl:text><xsl:value-of select="fileName"/>
						</thumb>
					</xsl:template>

				</xsl:stylesheet>
			</XSLT>
			<RegExp input="$$12" output="$$3" dest="16+">
				<expression>&lt;keyType&gt;fanart&lt;/keyType&gt;</expression>
			</RegExp>
			<RegExp input="$$12" output="" dest="3">
				<expression>&lt;keyType&gt;fanart&lt;/keyType&gt;</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</OutputTVDBArt>

	<StartDelayLoop clearbuffers="no" dest="3">
		<RegExp input="$$8" output="&lt;details&gt;\1&lt;/details&gt;" dest="3">
			<RegExp input="" output="`X" dest="11">
				<expression/>
			</RegExp>
			<RegExp input="" output="&lt;chain function=&quot;DelayLoop&quot;&gt;&amp;&lt;/chain&gt;" dest="8">
				<expression/>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</StartDelayLoop>
	<DelayLoop clearbuffers="no" dest="4">
		<RegExp input="$$4" output="&lt;details&gt;\1&lt;/details&gt;" dest="4">
			<RegExp input="$$11" output="&lt;chain function=&quot;DelayLoop&quot;&gt;&amp;&lt;/chain&gt;" dest="4">
				<RegExp input="$$10" output="\1" dest="11">
					<RegExp input="$$11" output="\1`X" dest="10">
						<expression>^((?:`(?!.*Z)){1,$INFO[DelayValue]}?)X$</expression>
					</RegExp>
					<RegExp input="$$11" output="\1Y" dest="10">
						<expression>^((?:`(?!.*Z)){$INFO[DelayValue]})`X$</expression>
					</RegExp>
					<RegExp input="$$11" output="\1Y" dest="10">
						<expression>^((?:`(?!.*Z)){1,$INFO[DelayValue]}?)`Y$</expression>
					</RegExp>
					<expression/>
				</RegExp>
				<expression clear="yes">``+</expression>
			</RegExp>
			<expression noclean="1"/>
		</RegExp>
	</DelayLoop>

</scraperfunctions>